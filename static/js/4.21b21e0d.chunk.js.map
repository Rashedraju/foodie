{"version":3,"sources":["components/Search/Search.js"],"names":["API_KEY","Search","state","recipes","query","loader","redirect","error","searchHandler","val","setState","toLowerCase","axios","get","then","response","updatedRecipes","data","hits","map","recipe","i","price","Math","floor","random","addToCart","catch","err","searchRecipes","this","className","clicked","Component"],"mappings":"4NAUMA,EAAU,mCAEVC,E,4MACFC,MAAQ,CACJC,QAAS,KACTC,MAAO,GACPC,QAAQ,EACRC,UAAU,EACVC,OAAO,G,EAWXC,cAAgB,SAACC,GACb,EAAKC,SAAS,CAAEN,MAAOK,IACvB,IAAML,EAAQK,EAAIE,cACJ,KAAVP,IACA,EAAKM,SAAS,CAAEL,QAAQ,IACxBO,IAAMC,IAAN,0CAA6CT,EAA7C,mBAzBG,WAyBH,oBAA+EJ,EAA/E,kBAAuGc,MAAK,SAAAC,GACxG,IACMC,EADOD,EAASE,KAAKC,KACCC,KAAI,SAACC,EAAQC,GACrC,OAAO,eACAD,EADP,CAEIE,MAAOC,KAAKC,MAAM,GAAAD,KAAKE,UAAwB,GAC/CC,WAAW,OAGnB,EAAKhB,SAAS,CAAEP,QAASa,EAAgBX,QAAQ,OAClDsB,OAAM,SAAAC,GACL,EAAKlB,SAAS,CAAEH,OAAO,EAAMF,QAAQ,S,uDAM7C,IAAIwB,EAAgB,KAGhBxB,EAASyB,KAAK5B,MAAMG,OAAS,kBAAC,IAAD,MAAc,KAQ/C,OALIyB,KAAK5B,MAAMC,UAAS0B,EAAgB,kBAAC,IAAD,CAAS1B,QAAS2B,KAAK5B,MAAMC,WAGjE2B,KAAK5B,MAAMK,QAAOsB,EAAgB,uBAAGE,UAAU,eAAb,uBAGlC,kBAAC,IAAD,KACI,yBAAKA,UAAU,gBACX,kBAAC,IAAD,CAAWC,QAASF,KAAKtB,gBACxBH,EACAwB,GAEL,kBAAC,IAAD,W,GAzDKI,aA+DNhC","file":"static/js/4.21b21e0d.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport axios from 'axios';\r\nimport SearchBar from '../UI/SearchBar/SearchBar';\r\nimport Recipes from '../../components/Recipes/Recipes';\r\nimport Spinner from '../UI/Loader/Loader';\r\nimport Feature from '../Home/Feature/Feature';\r\nimport Aux from '../../hoc/Auxiliary/Auxiliary';\r\n\r\nconst API_ID = 'da74e8ed';\r\nconst API_KEY = 'ed17032dee115bf17bfeb5bb5aea6381';\r\n\r\nclass Search extends Component {\r\n    state = {\r\n        recipes: null,\r\n        query: '',\r\n        loader: false,\r\n        redirect: false,\r\n        error: false,\r\n    }\r\n\r\n    /** HANDLE SEARCH\r\n     *      *GET SEARCH QUERY\r\n     *      *REQUEST DATA\r\n     *      *UPDATE STATE\r\n     *      *AFTER UPDATE COMPONENT WILL RERENDER\r\n     *      *IF FAILED TO SEARCH SHOW ERROR\r\n     */\r\n\r\n    searchHandler = (val) => {\r\n        this.setState({ query: val })\r\n        const query = val.toLowerCase();\r\n        if (query !== '') {\r\n            this.setState({ loader: true });\r\n            axios.get(`https://api.edamam.com/search?q=${query}&app_id=${API_ID}&app_key=${API_KEY}&from=0&to=30`).then(response => {\r\n                const data = response.data.hits;\r\n                const updatedRecipes = data.map((recipe, i) => {\r\n                    return {\r\n                        ...recipe,\r\n                        price: Math.floor(Math.random() * (20 - 10)) + 10,\r\n                        addToCart: false\r\n                    }\r\n                })\r\n                this.setState({ recipes: updatedRecipes, loader: false })\r\n            }).catch(err => {\r\n                this.setState({ error: true, loader: false });\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let searchRecipes = null;\r\n\r\n        // DISPLAY SPINNER WHILE SEARCH ENDED \r\n        let loader = this.state.loader ? <Spinner /> : null;\r\n\r\n        // RENDER RECIPES \r\n        if (this.state.recipes) searchRecipes = <Recipes recipes={this.state.recipes} />;\r\n\r\n        // SHOW ERROR IF FAILED TO SEARCH\r\n        if (this.state.error) searchRecipes = <p className=\"text-center\">!Recipes Not Found</p>;\r\n\r\n        return (\r\n            <Aux>\r\n                <div className=\"d-block mb-3\">\r\n                    <SearchBar clicked={this.searchHandler} />\r\n                    {loader}\r\n                    {searchRecipes}\r\n                </div>\r\n                <Feature />\r\n            </Aux>\r\n\r\n        );\r\n    }\r\n}\r\nexport default Search;"],"sourceRoot":""}