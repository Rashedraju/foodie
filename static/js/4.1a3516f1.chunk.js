(this.webpackJsonpfoodie=this.webpackJsonpfoodie||[]).push([[4],{352:function(e,t,a){e.exports={"bg-black":"Payment_bg-black__cThPl","sticky-top":"Payment_sticky-top__3TOJW","outline-none":"Payment_outline-none__72eWU","shadow-md":"Payment_shadow-md__2hhRm",pointer:"Payment_pointer__3QOsH","radius-0":"Payment_radius-0__2GBqL","btn-white":"Payment_btn-white__2x2JZ","pr-sm":"Payment_pr-sm__3GZTX","w-on-sm-100":"Payment_w-on-sm-100__3JY7v","w-sm-50":"Payment_w-sm-50__1BBBH","display-md":"Payment_display-md__1Zm5a","w-min-md":"Payment_w-min-md__IOAar","w-md-75":"Payment_w-md-75__1NKHN","w-md-50":"Payment_w-md-50__3hcJp","w-mx-md-100":"Payment_w-mx-md-100__2ZnZN",checkout__step:"Payment_checkout__step__x7pR_","slide-right":"Payment_slide-right__38Wdi",methodToggler:"Payment_methodToggler__WXK39",methodRadio:"Payment_methodRadio__3mxL7",activeMethodRadio:"Payment_activeMethodRadio__NqvyL",paymentDetails:"Payment_paymentDetails__1STpC",activeMethod:"Payment_activeMethod__TeGdU",scale1:"Payment_scale1__1yBj-"}},354:function(e,t,a){e.exports={orderConfirm:"OrderConfirm_orderConfirm__1-eNq",icon:"OrderConfirm_icon__QErn-",title:"OrderConfirm_title__3TfM8",bottom:"OrderConfirm_bottom__xbefo",button:"OrderConfirm_button__3oXUv",success:"OrderConfirm_success__z0c_h",subtitle:"OrderConfirm_subtitle__17Ne-",failed:"OrderConfirm_failed__1NAa3"}},356:function(e,t,a){e.exports={"bg-black":"Checkout_bg-black__2Loga","sticky-top":"Checkout_sticky-top__1V2RD","outline-none":"Checkout_outline-none__3SqIJ","shadow-md":"Checkout_shadow-md__1pmBM",pointer:"Checkout_pointer__1YN6R","radius-0":"Checkout_radius-0__1H73-","btn-white":"Checkout_btn-white__15mqB","pr-sm":"Checkout_pr-sm__37ZCn","w-on-sm-100":"Checkout_w-on-sm-100__1ogQY","w-sm-50":"Checkout_w-sm-50__2nhPn","display-md":"Checkout_display-md__3lGpz","w-min-md":"Checkout_w-min-md__2dP5P","w-md-75":"Checkout_w-md-75__2FO9S","w-md-50":"Checkout_w-md-50__4nokc","w-mx-md-100":"Checkout_w-mx-md-100__3DmYY",checkout__step:"Checkout_checkout__step__2HdBv","slide-right":"Checkout_slide-right__3m5Bk",checkout:"Checkout_checkout__3LYDR",steps:"Checkout_steps__1Yysi",stepsItem:"Checkout_stepsItem__2bTiy",stepsNo:"Checkout_stepsNo__3JCNV",activeStepNo:"Checkout_activeStepNo__2cY_S",stepsTitle:"Checkout_stepsTitle__2vmed",scale1:"Checkout_scale1__kcVeG"}},360:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a(25),c=a(24),o=a(1),l=a.n(o),m=a(30),i=a(51),s=a(358),u=a(110),d=a(120),p=a(121),_=a(327),h=a(152),b=function(e){var t=e.loading,a=e.backTitle,n=e.nextTitle,r=e.buttonBack,c=e.buttonNext;return l.a.createElement("div",{className:"w-100 d-flex justify-content-between my-3 px-3"},l.a.createElement(u.a,{type:"button",variant:"light",className:"border border-primary mr-2 shadow-none text-uppercase d-flex align-items-center",onClick:r},l.a.createElement(h.a,null)," ",a),l.a.createElement(u.a,{type:"submit",variant:"primary",className:"ml-2 shadow-none text-uppercase d-flex align-items-center",onClick:c},t?l.a.createElement(_.a,{as:"span",role:"status",animation:"border",size:"sm"}):l.a.createElement(l.a.Fragment,null," ",n," ",l.a.createElement(h.b,null)," ")))},y=function(e){var t=e.cartItems,a=e.price,n=e.toggleToCart,r=e.updateCount,c=e.buttonBack,o=e.buttonNext;return l.a.createElement("div",{className:"p-2 w-md-75 checkout__step"},t.length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{className:"text-center"}," Order Summary "),l.a.createElement("p",{className:"text-center"},"Review items in your basket."),t.map((function(e){return l.a.createElement(p.a,{key:e.id,item:e,toggleToCart:function(){return n(!1,e)},updateCount:r})})),l.a.createElement(d.a,{price:a}),l.a.createElement(b,{backTitle:"continue shopping",nextTitle:"continue to shipping",buttonBack:c,buttonNext:o})," "):l.a.createElement(s.a,null,l.a.createElement(s.a.Body,null,l.a.createElement("h4",{className:"text-center"}," Your cart is empty! "),l.a.createElement("p",{className:"text-center"}," Start adding items to your cart "),l.a.createElement(u.a,{type:"button",variant:"primary",className:"d-block mx-auto shadow-none text-uppercase",onClick:o},"Continue shopping"))))},E=a(334),f=a(353),g=a(337),v=a.n(g),C=a(118),N=a(321),k=a(351),x=a(166),O=a(86),w=function(e){var t=e.executeSubmit,a=Object(C.b)(),n=a.submitForm,r=a.errors,c=a.values,l=""!==c.name&&""!==c.cardnumber&&""!==c.expiry&&""!==c.cvv&&!r.name&&!r.cardnumber&&!r.expiry&&!r.cvv;return Object(o.useEffect)((function(){(t||l)&&n()}),[t,l,n]),null},P=function(e){var t=e.submitCardInfo,a=e.executeSubmit;return l.a.createElement(C.a,{initialValues:{name:"",cardnumber:"",expiry:"",cvv:""},validationSchema:O.b({name:O.c().required("Name is required").test("test-name","Card name is invalid",(function(e){return v.a.cardholderName(e).isValid})),cardnumber:O.c().max(19).required("Please Enter your card number").test("test-number","Card number is invalid",(function(e){return v.a.number(e).isValid})),expiry:O.c().required("Please enter your card expiry date").test("test-expiry","Card expiry date is invalid",(function(e){return v.a.expirationDate(e).isValid})),cvv:O.c().max(4).required("Please enter at least 3 digits").test("test-cvv","Card cvv is invalid",(function(e){return v.a.cvv(e).isValid}))}),onSubmit:function(e,a){t(e),a.setSubmitting(!1)}},(function(e){return l.a.createElement(N.a,{className:"form"},l.a.createElement(k.a,null,l.a.createElement(x.a,{sm:6,className:"mt-3"},l.a.createElement(N.a.Control,Object.assign({id:"name",type:"text",placeholder:"Name on card"},e.getFieldProps("name"))),e.touched.name&&e.errors.name?l.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.name):l.a.createElement("div",null," \xa0")),l.a.createElement(x.a,{sm:6,className:"mt-3"},l.a.createElement(N.a.Control,Object.assign({id:"cardnumber",type:"text",placeholder:"Card number"},e.getFieldProps("cardnumber"))),e.touched.cardnumber&&e.errors.cardnumber?l.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.cardnumber):l.a.createElement("div",null," \xa0")),l.a.createElement(x.a,{sm:6,className:"mt-3"},l.a.createElement(N.a.Control,Object.assign({id:"expiry",type:"text",placeholder:"Expiry date"},e.getFieldProps("expiry"))),e.touched.expiry&&e.errors.expiry?l.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.expiry):l.a.createElement("div",null," \xa0")),l.a.createElement(x.a,{sm:6,className:"mt-3"},l.a.createElement(N.a.Control,Object.assign({id:"cvv",type:"text",placeholder:"CVV",maxLength:4},e.getFieldProps("cvv"))),e.touched.cvv&&e.errors.cvv?l.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.cvv):l.a.createElement("div",null," \xa0"))),l.a.createElement(w,{executeSubmit:a}))}))},j=a(352),S=a.n(j),T=function(e){var t=e.buttonBack,a=e.submitCardInfo,r=e.loading,m=Object(o.useState)("card"),i=Object(c.a)(m,2),u=i[0],d=i[1],p=Object(o.useState)(0),_=Object(c.a)(p,2),h=_[0],y=_[1],g=Object(o.useState)({}),v=Object(c.a)(g,2),C=v[0],N=v[1],k=[],x=[],O=[],w=[];"card"===u&&(k.push(S.a.activeMethod),O.push(S.a.activeMethodRadio),x.pop(),w.pop()),"cash"===u&&(x.push(S.a.activeMethod),w.push(S.a.activeMethodRadio),k.pop(),O.pop());return l.a.createElement("div",{className:"w-md-75 my-3 checkout__step"},l.a.createElement(s.a,{className:"my-3"},l.a.createElement(s.a.Body,null,l.a.createElement("div",{className:S.a.methodToggler},l.a.createElement("span",{className:"".concat(S.a.methodRadio," ").concat(O.join(" ")),role:"button",tabIndex:-1,onClick:function(){return d("card")}})," ","Credit / Debit Card",l.a.createElement("div",{style:{marginLeft:"auto",fontSize:"2rem"}}," ",l.a.createElement(f.a,null)," ",l.a.createElement(E.a,null)," ")),l.a.createElement("div",{className:"".concat(S.a.paymentDetails," ").concat(k.join(" "))},l.a.createElement("h4",{className:"text-center"}," Accepted cards "),l.a.createElement("div",{style:{textAlign:"center",fontSize:"2rem"}},l.a.createElement(f.a,null)," ",l.a.createElement(E.a,null)," "),l.a.createElement(P,{executeSubmit:h,submitCardInfo:function(e){return N({cardInfo:Object(n.a)({},e),method:u})}})))),l.a.createElement(s.a,{className:"my-3"},l.a.createElement(s.a.Body,null,l.a.createElement("div",{className:"".concat(S.a.methodToggler," my-3")},l.a.createElement("span",{className:"".concat(S.a.methodRadio," ").concat(w.join(" ")),role:"button",tabIndex:-2,onClick:function(){return d("cash")}})," ","Cash"),l.a.createElement("div",{className:"".concat(S.a.paymentDetails," ").concat(x.join(" "))},l.a.createElement("h4",null,"Pay by cash"),l.a.createElement("p",null,"Consider payment upon ordering for contactless delivery. You can't pay by a card to the rider upon delivery.")))),l.a.createElement(b,{backTitle:"go back",nextTitle:"place order",loading:r,buttonBack:t,buttonNext:function(){"card"===u?(C.cardInfo&&a(Object(n.a)({},C)),y((function(e){return e+1}))):"cash"===u&&a({method:u})}}))},I=function(e){var t=e.fullName,a=e.email,n=e.buttonBack,r=e.submitSippingInfo;return l.a.createElement("div",{className:"p-2 w-md-75 checkout__step"},l.a.createElement("h4",{className:"text-center"}," Shipping Details "),l.a.createElement(C.a,{initialValues:{fullname:t,email:a,address:"",phone:"+8801"},validationSchema:O.b({fullname:O.c().required("Name required!"),email:O.c().email().required("Please enter your email address."),address:O.c().required("Please enter delivery address."),phone:O.c().matches(/^(\+8801)[1-9]\d{8}/g).required("Phone number required.")}),onSubmit:function(e){r(e)}},(function(e){return l.a.createElement(N.a,{className:"form",onSubmit:e.handleSubmit},l.a.createElement(k.a,null,l.a.createElement(x.a,{sm:6,className:"my-3"},l.a.createElement(N.a.Control,Object.assign({id:"fullname",placeholder:"Full Name"},e.getFieldProps("fullname"))),e.touched.fullname&&e.errors.fullname?l.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.fullname):l.a.createElement("div",null," \xa0")),l.a.createElement(x.a,{sm:6,className:"my-3"},l.a.createElement(N.a.Control,Object.assign({id:"email",type:"email",placeholder:"Email Address"},e.getFieldProps("email"))),e.touched.email&&e.errors.email?l.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.email):l.a.createElement("div",null," \xa0")),l.a.createElement(x.a,{sm:6,className:"my-3"},l.a.createElement(N.a.Control,Object.assign({id:"address",placeholder:"Enter full shipping address"},e.getFieldProps("address"))),e.touched.address&&e.errors.address?l.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.address):l.a.createElement("div",null," \xa0")),l.a.createElement(x.a,{sm:6,className:"my-3"},l.a.createElement(N.a.Control,Object.assign({id:"phone",type:"phone",placeholder:"Mobile Number"},e.getFieldProps("phone"))),e.touched.phone&&e.errors.phone?l.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.phone):l.a.createElement("div",null," \xa0"))),l.a.createElement(b,{backTitle:"go back",nextTitle:"continue to payment",buttonBack:n}))})))},B=a(355),R=a(354),q=a.n(R),F=function(e){var t=e.error,a=e.clicked;return l.a.createElement(s.a,{className:"w-md-75 my-3 checkout__step"},l.a.createElement(s.a.Body,null,l.a.createElement("div",{className:" checkout__step ".concat(q.a.orderConfirm," ").concat(t?q.a.failed:q.a.success)},t?l.a.createElement(E.b,{className:q.a.icon}):l.a.createElement(B.a,{className:q.a.icon}),l.a.createElement("div",{className:q.a.title}," ",t?"Failed":"Awesome"," "),l.a.createElement("p",{className:q.a.subtitle}," ",t?"Oops! Something went terribly wrong here":"Congratulatins. your order is accepted!"),l.a.createElement("div",{className:q.a.bottom},l.a.createElement(u.a,{className:q.a.button,onClick:a},t?"Please try again":"More hungry. Lets do again")))))},M=function(e,t){switch(e){case"id":return document.getElementById(t);case"class":return document.getElementsByClassName(t);default:return null}},D=a(32),V=a(356),Y=a.n(V);t.default=Object(m.b)((function(e){return{cartItems:e.cart.cartItems,price:e.cart.price,authRedirectPath:e.home.authRedirectPath,user:e.auth.user}}),(function(e){return{onToggleToCart:function(t,a){return e(D.h(t,a))},onUpdateItemCount:function(t,a){return e(D.i(t,a))},onToggleCartUI:function(t){return e(D.g(t))},onClearCart:function(){return e(D.d())}}}))((function(e){var t=e.onToggleCartUI,a=e.cartItems,m=e.price,s=e.onToggleToCart,u=e.onUpdateItemCount,d=e.history,p=e.authRedirectPath,_=e.user,h=e.onClearCart,b=Object(o.useState)(1),E=Object(c.a)(b,2),f=E[0],g=E[1],v=Object(o.useState)(!1),C=Object(c.a)(v,2),N=C[0],k=C[1],x=Object(o.useState)(!1),O=Object(c.a)(x,2),w=O[0],P=O[1],j=Object(o.useState)({orderItems:Object(r.a)(a),orderPrice:Object(n.a)({},m)}),S=Object(c.a)(j,2),B=S[0],R=S[1];Object(o.useEffect)((function(){return _.isAuthenticated||d.replace(p),t(!1),M("id","cartToggler").style.pointerEvents="none",function(){M("id","cartToggler").style.pointerEvents="auto"}}),[p,d,t,_.isAuthenticated]);var q,D=function(e){var t,a=Object(n.a)(Object(n.a)({},B),{},{paymentInfo:Object(n.a)({},e)});R((function(e){return Object(n.a)(Object(n.a)({},e),a)})),t=a,k(!0),Object(i.f)(t).then((function(){g((function(e){return e+1})),k(!1),P(!1),h()})).catch((function(e){console.log(e),k(!1),P(!0)}))};return 1===f&&(q=l.a.createElement(y,{cartItems:a,price:m,toggleToCart:s,updateCount:u,buttonBack:function(){return d.push(p)},buttonNext:function(){return g((function(e){return e+1}))}})),2===f&&(q=l.a.createElement(I,{fullName:_.displayName,email:_.email,buttonBack:function(){return g((function(e){return e-1}))},submitSippingInfo:function(e){return function(e){R((function(t){return Object(n.a)(Object(n.a)({},t),{},{shippingInfo:Object(n.a)({},e)})})),g((function(e){return e+1}))}(e)}})),3===f&&(q=l.a.createElement(T,{loading:N,buttonBack:function(){return g((function(e){return e-1}))},submitCardInfo:function(e){return D(e)}})),4===f&&(q=l.a.createElement(F,{error:w,clicked:function(){w?g(3):d.replace("./")}})),l.a.createElement("section",{className:"container py-5 ".concat(Y.a.checkout)},f<4&&l.a.createElement("div",{className:Y.a.steps},[{id:1,title:"Order Summary"},{id:2,title:"Shipping Details"},{id:3,title:"Payment"}].map((function(e){return l.a.createElement("div",{className:Y.a.stepsItem,key:e.id},l.a.createElement("div",{className:[Y.a.stepsNo,e.id===f&&Y.a.activeStepNo].join(" ")}," ",e.id," "),l.a.createElement("div",{className:Y.a.stepsTitle}," ",e.title," "))}))),q)}))}}]);
//# sourceMappingURL=4.1a3516f1.chunk.js.map