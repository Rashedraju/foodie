(this.webpackJsonpfoodie=this.webpackJsonpfoodie||[]).push([[4],{352:function(e,t,a){e.exports={"bg-black":"Payment_bg-black__cThPl","sticky-top":"Payment_sticky-top__3TOJW","outline-none":"Payment_outline-none__72eWU","shadow-md":"Payment_shadow-md__2hhRm",pointer:"Payment_pointer__3QOsH","radius-0":"Payment_radius-0__2GBqL","btn-white":"Payment_btn-white__2x2JZ","pr-sm":"Payment_pr-sm__3GZTX","w-on-sm-100":"Payment_w-on-sm-100__3JY7v","w-sm-50":"Payment_w-sm-50__1BBBH","display-md":"Payment_display-md__1Zm5a","w-min-md":"Payment_w-min-md__IOAar","w-md-75":"Payment_w-md-75__1NKHN","w-md-50":"Payment_w-md-50__3hcJp","w-mx-md-100":"Payment_w-mx-md-100__2ZnZN",checkout__step:"Payment_checkout__step__x7pR_","slide-right":"Payment_slide-right__38Wdi",methodToggler:"Payment_methodToggler__WXK39",methodRadio:"Payment_methodRadio__3mxL7",activeMethodRadio:"Payment_activeMethodRadio__NqvyL",paymentDetails:"Payment_paymentDetails__1STpC",activeMethod:"Payment_activeMethod__TeGdU",scale1:"Payment_scale1__1yBj-"}},354:function(e,t,a){e.exports={orderConfirm:"OrderConfirm_orderConfirm__1-eNq",icon:"OrderConfirm_icon__QErn-",title:"OrderConfirm_title__3TfM8",bottom:"OrderConfirm_bottom__xbefo",button:"OrderConfirm_button__3oXUv",success:"OrderConfirm_success__z0c_h",subtitle:"OrderConfirm_subtitle__17Ne-",failed:"OrderConfirm_failed__1NAa3"}},356:function(e,t,a){e.exports={"bg-black":"Checkout_bg-black__2Loga","sticky-top":"Checkout_sticky-top__1V2RD","outline-none":"Checkout_outline-none__3SqIJ","shadow-md":"Checkout_shadow-md__1pmBM",pointer:"Checkout_pointer__1YN6R","radius-0":"Checkout_radius-0__1H73-","btn-white":"Checkout_btn-white__15mqB","pr-sm":"Checkout_pr-sm__37ZCn","w-on-sm-100":"Checkout_w-on-sm-100__1ogQY","w-sm-50":"Checkout_w-sm-50__2nhPn","display-md":"Checkout_display-md__3lGpz","w-min-md":"Checkout_w-min-md__2dP5P","w-md-75":"Checkout_w-md-75__2FO9S","w-md-50":"Checkout_w-md-50__4nokc","w-mx-md-100":"Checkout_w-mx-md-100__3DmYY",checkout__step:"Checkout_checkout__step__2HdBv","slide-right":"Checkout_slide-right__3m5Bk",checkout:"Checkout_checkout__3LYDR",steps:"Checkout_steps__1Yysi",stepsItem:"Checkout_stepsItem__2bTiy",stepsNo:"Checkout_stepsNo__3JCNV",activeStepNo:"Checkout_activeStepNo__2cY_S",stepsTitle:"Checkout_stepsTitle__2vmed",scale1:"Checkout_scale1__kcVeG"}},360:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a(25),c=a(24),o=a(51),l=a(1),m=a.n(l),i=a(358),s=a(334),u=a(353),d=a(337),p=a.n(d),_=a(118),h=a(321),b=a(351),y=a(166),E=a(86),f=function(e){var t=e.executeSubmit,a=Object(_.b)(),n=a.submitForm,r=a.errors,c=a.values,o=""!==c.name&&""!==c.cardnumber&&""!==c.expiry&&""!==c.cvv&&!r.name&&!r.cardnumber&&!r.expiry&&!r.cvv;return Object(l.useEffect)((function(){(t||o)&&n()}),[t,o,n]),null},g=function(e){var t=e.submitCardInfo,a=e.executeSubmit;return m.a.createElement(_.a,{initialValues:{name:"",cardnumber:"",expiry:"",cvv:""},validationSchema:E.b({name:E.c().required("Name is required").test("test-name","Card name is invalid",(function(e){return p.a.cardholderName(e).isValid})),cardnumber:E.c().max(19).required("Please Enter your card number").test("test-number","Card number is invalid",(function(e){return p.a.number(e).isValid})),expiry:E.c().required("Please enter your card expiry date").test("test-expiry","Card expiry date is invalid",(function(e){return p.a.expirationDate(e).isValid})),cvv:E.c().max(4).required("Please enter at least 3 digits").test("test-cvv","Card cvv is invalid",(function(e){return p.a.cvv(e).isValid}))}),onSubmit:function(e,a){t(e),a.setSubmitting(!1)}},(function(e){return m.a.createElement(h.a,{className:"form"},m.a.createElement(b.a,null,m.a.createElement(y.a,{sm:6,className:"mt-3"},m.a.createElement(h.a.Control,Object.assign({id:"name",type:"text",placeholder:"Name on card"},e.getFieldProps("name"))),e.touched.name&&e.errors.name?m.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.name):m.a.createElement("div",null," \xa0")),m.a.createElement(y.a,{sm:6,className:"mt-3"},m.a.createElement(h.a.Control,Object.assign({id:"cardnumber",type:"text",placeholder:"Card number"},e.getFieldProps("cardnumber"))),e.touched.cardnumber&&e.errors.cardnumber?m.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.cardnumber):m.a.createElement("div",null," \xa0")),m.a.createElement(y.a,{sm:6,className:"mt-3"},m.a.createElement(h.a.Control,Object.assign({id:"expiry",type:"text",placeholder:"Expiry date"},e.getFieldProps("expiry"))),e.touched.expiry&&e.errors.expiry?m.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.expiry):m.a.createElement("div",null," \xa0")),m.a.createElement(y.a,{sm:6,className:"mt-3"},m.a.createElement(h.a.Control,Object.assign({id:"cvv",type:"text",placeholder:"CVV",maxLength:4},e.getFieldProps("cvv"))),e.touched.cvv&&e.errors.cvv?m.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.cvv):m.a.createElement("div",null," \xa0"))),m.a.createElement(f,{executeSubmit:a}))}))},v=a(110),C=a(327),N=a(152),k=function(e){var t=e.loading,a=e.backTitle,n=e.nextTitle,r=e.buttonBack,c=e.buttonNext;return m.a.createElement("div",{className:"w-100 d-flex justify-content-between my-3 px-3"},m.a.createElement(v.a,{type:"button",variant:"light",className:"border border-primary mr-2 shadow-none text-uppercase d-flex align-items-center",onClick:r},m.a.createElement(N.a,null)," ",a),m.a.createElement(v.a,{type:"submit",variant:"primary",className:"ml-2 shadow-none text-uppercase d-flex align-items-center",onClick:c},t?m.a.createElement(C.a,{as:"span",role:"status",animation:"border",size:"sm"}):m.a.createElement(m.a.Fragment,null," ",n," ",m.a.createElement(N.b,null)," ")))},x=a(352),O=a.n(x),w=function(e){var t=e.buttonBack,a=e.submitCardInfo,r=e.loading,o=Object(l.useState)("card"),d=Object(c.a)(o,2),p=d[0],_=d[1],h=Object(l.useState)(0),b=Object(c.a)(h,2),y=b[0],E=b[1],f=Object(l.useState)({}),v=Object(c.a)(f,2),C=v[0],N=v[1],x=[],w=[],P=[],j=[];"card"===p&&(x.push(O.a.activeMethod),P.push(O.a.activeMethodRadio),w.pop(),j.pop()),"cash"===p&&(w.push(O.a.activeMethod),j.push(O.a.activeMethodRadio),x.pop(),P.pop());return m.a.createElement("div",{className:"w-md-75 my-3 checkout__step"},m.a.createElement(i.a,{className:"my-3"},m.a.createElement(i.a.Body,null,m.a.createElement("div",{className:O.a.methodToggler},m.a.createElement("span",{className:"".concat(O.a.methodRadio," ").concat(P.join(" ")),role:"button",tabIndex:-1,onClick:function(){return _("card")}})," ","Credit / Debit Card",m.a.createElement("div",{style:{marginLeft:"auto",fontSize:"2rem"}}," ",m.a.createElement(u.a,null)," ",m.a.createElement(s.a,null)," ")),m.a.createElement("div",{className:"".concat(O.a.paymentDetails," ").concat(x.join(" "))},m.a.createElement("h4",{className:"text-center"}," Accepted cards "),m.a.createElement("div",{style:{textAlign:"center",fontSize:"2rem"}},m.a.createElement(u.a,null)," ",m.a.createElement(s.a,null)," "),m.a.createElement(g,{executeSubmit:y,submitCardInfo:function(e){return N({cardInfo:Object(n.a)({},e),method:p})}})))),m.a.createElement(i.a,{className:"my-3"},m.a.createElement(i.a.Body,null,m.a.createElement("div",{className:"".concat(O.a.methodToggler," my-3")},m.a.createElement("span",{className:"".concat(O.a.methodRadio," ").concat(j.join(" ")),role:"button",tabIndex:-2,onClick:function(){return _("cash")}})," ","Cash"),m.a.createElement("div",{className:"".concat(O.a.paymentDetails," ").concat(w.join(" "))},m.a.createElement("h4",null,"Pay by cash"),m.a.createElement("p",null,"Consider payment upon ordering for contactless delivery. You can't pay by a card to the rider upon delivery.")))),m.a.createElement(k,{backTitle:"go back",nextTitle:"place order",loading:r,buttonBack:t,buttonNext:function(){"card"===p?(C.cardInfo&&a(Object(n.a)({},C)),E((function(e){return e+1}))):"cash"===p&&a({method:p})}}))},P=function(e){var t=e.fullName,a=e.email,n=e.buttonBack,r=e.submitSippingInfo;return m.a.createElement("div",{className:"p-2 w-md-75 checkout__step"},m.a.createElement("h4",{className:"text-center"}," Shipping Details "),m.a.createElement(_.a,{initialValues:{fullname:t,email:a,address:"",phone:"+8801"},validationSchema:E.b({fullname:E.c().required("Name required!"),email:E.c().email().required("Please enter your email address."),address:E.c().required("Please enter delivery address."),phone:E.c().matches(/^(\+8801)[1-9]\d{8}/g).required("Phone number required.")}),onSubmit:function(e){r(e)}},(function(e){return m.a.createElement(h.a,{className:"form",onSubmit:e.handleSubmit},m.a.createElement(b.a,null,m.a.createElement(y.a,{sm:6,className:"my-3"},m.a.createElement(h.a.Control,Object.assign({id:"fullname",placeholder:"Full Name"},e.getFieldProps("fullname"))),e.touched.fullname&&e.errors.fullname?m.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.fullname):m.a.createElement("div",null," \xa0")),m.a.createElement(y.a,{sm:6,className:"my-3"},m.a.createElement(h.a.Control,Object.assign({id:"email",type:"email",placeholder:"Email Address"},e.getFieldProps("email"))),e.touched.email&&e.errors.email?m.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.email):m.a.createElement("div",null," \xa0")),m.a.createElement(y.a,{sm:6,className:"my-3"},m.a.createElement(h.a.Control,Object.assign({id:"address",placeholder:"Enter full shipping address"},e.getFieldProps("address"))),e.touched.address&&e.errors.address?m.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.address):m.a.createElement("div",null," \xa0")),m.a.createElement(y.a,{sm:6,className:"my-3"},m.a.createElement(h.a.Control,Object.assign({id:"phone",type:"phone",placeholder:"Mobile Number"},e.getFieldProps("phone"))),e.touched.phone&&e.errors.phone?m.a.createElement("p",{className:"pl-2 text-danger mb-0"},e.errors.phone):m.a.createElement("div",null," \xa0"))),m.a.createElement(k,{backTitle:"go back",nextTitle:"continue to payment",buttonBack:n}))})))},j=a(355),S=a(354),T=a.n(S),I=function(e){var t=e.error,a=e.clicked;return m.a.createElement(i.a,{className:"w-md-75 my-3 checkout__step"},m.a.createElement(i.a.Body,null,m.a.createElement("div",{className:" checkout__step ".concat(T.a.orderConfirm," ").concat(t?T.a.failed:T.a.success)},t?m.a.createElement(s.b,{className:T.a.icon}):m.a.createElement(j.a,{className:T.a.icon}),m.a.createElement("div",{className:T.a.title}," ",t?"Failed":"Awesome"," "),m.a.createElement("p",{className:T.a.subtitle}," ",t?"Oops! Something went terribly wrong here":"Congratulatins. your order is accepted!"),m.a.createElement("div",{className:T.a.bottom},m.a.createElement(v.a,{className:T.a.button,onClick:a},t?"Please try again":"More hungry. Lets do again")))))},B=a(30),R=function(e,t){switch(e){case"id":return document.getElementById(t);case"class":return document.getElementsByClassName(t);default:return null}},q=a(32),F=a(121),M=a(36),D=a(120),V=function(e){var t=e.cartItems,a=e.price,n=e.toggleToCart,r=e.updateCount,c=e.buttonBack,o=e.buttonNext;return m.a.createElement("div",{className:"p-2 w-md-75 checkout__step"},t.length>0?m.a.createElement(m.a.Fragment,null,m.a.createElement("h4",{className:"text-center"}," Order Summary "),m.a.createElement("p",{className:"text-center"},"Review items in your basket."),t.map((function(e){return m.a.createElement(F.a,{key:e.id,item:e,toggleToCart:function(){return n(!1,e)},updateCount:r})})),m.a.createElement(D.a,{price:a}),m.a.createElement(k,{backTitle:"continue shopping",nextTitle:"continue to shipping",buttonBack:c,buttonNext:o})," "):m.a.createElement(i.a,null,m.a.createElement(i.a.Body,null,m.a.createElement("h4",{className:"text-center"}," Your cart is empty! "),m.a.createElement("p",{className:"text-center"}," Start adding items to your cart "),m.a.createElement(M.b,{to:"./",className:"btn btn-primary d-block mx-auto shadow-none text-uppercase",style:{maxWidth:"20rem"}},"Continue shopping"))))},Y=a(356),A=a.n(Y);t.default=Object(B.b)((function(e){return{cartItems:e.cart.cartItems,price:e.cart.price,authRedirectPath:e.home.authRedirectPath,user:e.auth.user}}),(function(e){return{onToggleToCart:function(t,a){return e(q.h(t,a))},onUpdateItemCount:function(t,a){return e(q.i(t,a))},onToggleCartUI:function(t){return e(q.g(t))},onClearCart:function(){return e(q.d())}}}))((function(e){var t=e.onToggleCartUI,a=e.cartItems,i=e.price,s=e.onToggleToCart,u=e.onUpdateItemCount,d=e.history,p=e.authRedirectPath,_=e.user,h=e.onClearCart,b=Object(l.useState)(1),y=Object(c.a)(b,2),E=y[0],f=y[1],g=Object(l.useState)(!1),v=Object(c.a)(g,2),C=v[0],N=v[1],k=Object(l.useState)(!1),x=Object(c.a)(k,2),O=x[0],j=x[1],S=Object(l.useState)({orderItems:Object(r.a)(a),orderPrice:Object(n.a)({},i)}),T=Object(c.a)(S,2),B=T[0],q=T[1];Object(l.useEffect)((function(){return _.isAuthenticated||d.replace(p),t(!1),R("id","cartToggler").style.pointerEvents="none",function(){R("id","cartToggler").style.pointerEvents="auto"}}),[p,d,t,_.isAuthenticated]);var F,M=function(e){var t,a=Object(n.a)(Object(n.a)({},B),{},{paymentInfo:Object(n.a)({},e)});q((function(e){return Object(n.a)(Object(n.a)({},e),a)})),t=a,N(!0),Object(o.f)(t).then((function(){f((function(e){return e+1})),N(!1),j(!1),h()})).catch((function(e){console.log(e),N(!1),j(!0)}))};return 1===E&&(F=m.a.createElement(V,{cartItems:a,price:i,toggleToCart:s,updateCount:u,buttonBack:function(){return d.push(p)},buttonNext:function(){return f((function(e){return e+1}))}})),2===E&&(F=m.a.createElement(P,{fullName:_.displayName,email:_.email,buttonBack:function(){return f((function(e){return e-1}))},submitSippingInfo:function(e){return function(e){q((function(t){return Object(n.a)(Object(n.a)({},t),{},{shippingInfo:Object(n.a)({},e)})})),f((function(e){return e+1}))}(e)}})),3===E&&(F=m.a.createElement(w,{loading:C,buttonBack:function(){return f((function(e){return e-1}))},submitCardInfo:function(e){return M(e)}})),4===E&&(F=m.a.createElement(I,{error:O,clicked:function(){O?f(3):d.replace("./")}})),m.a.createElement("section",{className:"container py-5 ".concat(A.a.checkout)},E<4&&m.a.createElement("div",{className:A.a.steps},[{id:1,title:"Order Summary"},{id:2,title:"Shipping Details"},{id:3,title:"Payment"}].map((function(e){return m.a.createElement("div",{className:A.a.stepsItem,key:e.id},m.a.createElement("div",{className:[A.a.stepsNo,e.id===E&&A.a.activeStepNo].join(" ")}," ",e.id," "),m.a.createElement("div",{className:A.a.stepsTitle}," ",e.title," "))}))),F)}))}}]);
//# sourceMappingURL=4.2141b53b.chunk.js.map